<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 976.3174743652344 977.8537292480469" width="1952.6349487304688" height="1955.7074584960938">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style>
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
  </defs>
  <rect x="0" y="0" width="976.3174743652344" height="977.8537292480469" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(28.309814453125 10) rotate(0 174.5 17.5)"><path d="M1.09 -0.01 C124.79 0.89, 252.14 1.73, 349.93 1.17 M-0.2 -0.13 C139.22 1.23, 278.42 0.94, 348.44 -0.29 M347.49 1.85 C350.78 7.75, 347.4 16.04, 349.28 35.35 M349.61 0.54 C348.45 8.66, 348.24 16.18, 349.23 35.41 M350.1 35.83 C242.73 33.72, 136.7 33.35, -0.16 34.19 M348.69 35.01 C226.05 37.52, 103.77 37.37, -0.54 34.6 M-1.35 33.8 C-0.22 27.39, -1.2 15.09, 1.21 -0.97 M-0.49 35.1 C-0.04 23.64, -0.03 12.31, 0.42 -0.26" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(33.309814453125 15) rotate(0 169.5 12.5)"><text x="169.5" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">Storage and Retrieval</text></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(18.276611328125 135.72467041015625) rotate(0 456 18)"><text x="0" y="15" font-family="Cascadia, Segoe UI Emoji" font-size="14.833340895591329px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">With SSTables, the sequency of key-vaule pairs is sorted by key. We call this format Sorted String Table,</text><text x="0" y="33" font-family="Cascadia, Segoe UI Emoji" font-size="14.833340895591329px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">or SSTable for short. </text></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round" transform="translate(29.83441162109375 75.58206176757812) rotate(0 133.5 17.5)"><path d="M-0.52 1.15 C79.28 1.3, 154.37 1.52, 267 0.28 M0.25 0.31 C97.93 -2.09, 196.82 -2.3, 267.41 -0.29 M265.71 -1.89 C267.15 7.52, 266.72 15.82, 266.22 36.43 M267.52 -0.95 C266.76 10.24, 267.52 20.99, 266.09 35.93 M265.92 35.96 C207.4 32.18, 148.68 34.31, 1.45 35.51 M267.78 35.1 C206.91 37.49, 145.9 37.3, 0.35 35.29 M-1.92 36.7 C2.14 22.91, 1.94 6.46, 0.87 -1.62 M-0.04 34.34 C-0.12 25.4, 0.99 15.37, 0.26 -1" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(34.83441162109375 80.58206176757812) rotate(0 128.5 12.5)"><text x="128.5" y="18" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">SSTables and LSM-Trees</text></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round" transform="translate(10 649.6194458007812) rotate(0 92.47854614257812 130.5667266845703)"><path d="M-1.89 0.85 C62.66 0.2, 121.63 0.7, 184.42 -0.86 M-0.24 -0.31 C71.32 -1.06, 141.85 -1.2, 184.42 -0.13 M184.33 1.52 C183.83 97.56, 184.39 196.33, 185.38 261.39 M185.72 -0.07 C184.75 56.08, 183.92 114.2, 184.46 260.71 M184.38 260.77 C131.06 262.82, 79.51 261.38, 0.03 260.82 M184.66 260.45 C122.37 261.5, 60.81 260.48, 0.46 260.42 M-1.14 260.83 C-0.37 194.57, 0.79 126.34, -1.58 0.27 M0.78 261.77 C0.95 183.94, 1.72 106.8, -0.63 -0.15" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(13.3721923828125 655.4319458007812) rotate(0 89.5 10)"><text x="0" y="16" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Key     byte offset</text></g><g stroke-linecap="round"><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(17.375213623046875 682.1657104492188) rotate(0 87.15985410973894 0.7103364646341674)"><path d="M1.08 0.65 C30 0.72, 145.32 0.11, 174.12 0.41 M0.2 -0.06 C28.95 0.14, 144.6 1.34, 173.44 1.48" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(28.011688232421875 702.9041442871094) rotate(0 75 68.5)"><text x="0" y="15.571428571428573" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">...</text><text x="0" y="35.142857142857146" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">ham       109001</text><text x="0" y="54.71428571428572" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">held      109123</text><text x="0" y="74.28571428571429" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hide      109456</text><text x="0" y="93.85714285714286" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hode      110233</text><text x="0" y="113.42857142857144" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">...</text><text x="0" y="133" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">...</text></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(12.431640625 594.7602233886719) rotate(0 75 19.5)"><text x="0" y="15.5" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Sparse index in </text><text x="0" y="35" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">memory</text></g><g stroke-opacity="0.8" fill-opacity="0.8" stroke-linecap="round" transform="translate(254.97662353515625 641.4541931152344) rotate(0 295.86541748046875 163.19976806640625)"><path d="M0.79 -0.02 C189.3 -1.7, 377.02 -0.33, 591.54 0.36 M0.04 0.29 C184.98 0.85, 370.4 1.03, 591.99 -0.2 M592.51 0.54 C588.6 119.48, 590.31 238.51, 592.22 326.38 M591.88 0.5 C593.96 94.7, 592.85 188.32, 592.29 325.9 M591.83 326.72 C433.82 325.46, 275.4 325.78, -0.5 325.64 M591.58 326.39 C472.06 324.37, 352.62 323.89, -0.37 326.34 M0.68 326.16 C-0.19 198.86, -0.28 71.38, 0.24 1.21 M-0.03 326.21 C-0.63 234.13, -1.67 141.92, 0.62 -0.16" stroke="#000000" stroke-width="1" fill="none"></path></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(259.6712646484375 596.9436645507812) rotate(0 174 10)"><text x="0" y="16" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Sorted segment file (SSTable) on disk</text></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(279.0555419921875 651.5367126464844) rotate(0 173.5 78)"><text x="0" y="15.5" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">.....</text><text x="0" y="35" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">ham:9033| ..|held:9098|help:9099|....</text><text x="0" y="54.5" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hide:2233|....|him:2323|.....</text><text x="0" y="74" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">hode: 4344|...|home:3233|</text><text x="0" y="93.5" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">.....</text><text x="0" y="113" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">....</text><text x="0" y="132.5" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">......</text><text x="0" y="152" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g><g stroke-linecap="round"><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(195.9962158203125 731.7372131347656) rotate(0 37.16974329297432 -28.05660490473508)"><path d="M1.2 -0.5 C4.57 -4.35, 12.29 -14.1, 20.27 -22.92 C28.26 -31.73, 40.2 -48.33, 49.11 -53.38 C58.01 -58.43, 69.47 -53.44, 73.71 -53.22 M0.37 -1.8 C3.67 -6, 11.35 -16.21, 19.86 -24.56 C28.37 -32.91, 42.4 -47.25, 51.42 -51.91 C60.44 -56.56, 70.29 -52.57, 73.97 -52.51" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(194.89434814453125 750.3476257324219) rotate(0 112.25720783541448 -52.66795362087436)"><path d="M0.01 -1.16 C14.85 -17.31, 54.29 -79.51, 89.27 -96.28 C124.24 -113.05, 187.07 -104.07, 209.85 -101.79 C232.63 -99.5, 223.02 -85.86, 225.96 -82.56 M-1.44 0.84 C13.76 -15.15, 56.49 -77.75, 91.61 -94.69 C126.73 -111.62, 186.94 -102.39, 209.28 -100.75 C231.61 -99.12, 222.79 -87.53, 225.61 -84.86" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(196.07794189453125 774.8805847167969) rotate(0 39.493736443952685 -38.46573059321645)"><path d="M0.96 -0.36 C10.94 -12.3, 46.16 -58.37, 59.16 -70.49 C72.16 -82.62, 75.9 -72.82, 78.98 -73.11 M0.01 -1.6 C9.85 -12.93, 44.87 -57.91, 57.94 -69.58 C71.01 -81.26, 75.2 -70.85, 78.44 -71.63" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-linecap="round"><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(198.2672119140625 789.3515319824219) rotate(0 38.60194459302818 -34.34047121554613)"><path d="M0.61 0.29 C5.05 -4.09, 18.77 -18.72, 25.76 -27.27 C32.74 -35.82, 33.86 -44.05, 42.52 -51 C51.19 -57.95, 72.18 -66.35, 77.74 -68.97 M-0.53 -0.6 C3.84 -4.77, 17.88 -18.01, 24.88 -26.25 C31.88 -34.5, 33.11 -43.03, 41.45 -50.06 C49.78 -57.09, 68.86 -65.22, 74.88 -68.44" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(17.312469482421875 495.5765686035156) rotate(0 464 40)"><text x="0" y="16" font-family="Cascadia, Segoe UI Emoji" font-size="16.33796582783279px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">You no longer need to keep a full index of all the keys in memory. To find a key,say "him"</text><text x="0" y="36" font-family="Cascadia, Segoe UI Emoji" font-size="16.33796582783279px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">you do know the offset hide and hode. So "him" must be between those two. This means you can</text><text x="0" y="56" font-family="Cascadia, Segoe UI Emoji" font-size="16.33796582783279px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">jump to the offset of hide, and scan from there until you find him. If not the key is not present</text><text x="0" y="76" font-family="Cascadia, Segoe UI Emoji" font-size="16.33796582783279px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">in the file</text></g><g stroke-opacity="0.8" fill-opacity="0.8" transform="translate(19.317474365234375 181.88330078125) rotate(0 473.5 49)"><text x="0" y="15.600000000000001" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">Advantages over hash index:</text><text x="0" y="35.2" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">* You no longer need to keep a full index of all keys in memory (would be impossible if the number of</text><text x="0" y="54.800000000000004" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">keys were really large)</text><text x="0" y="74.4" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">* Merging segments is simple and efficient even for files that are bigger than available memory.</text><text x="0" y="94" font-family="Cascadia, Segoe UI Emoji" font-size="16px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr"></text></g></svg>